<! DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <title>
    Скалолазное исследование
    </title>
  </head>
  <body>
   <fieldset id="questionary-fieldset"><h1>Скалолазное Исследование</h1></fieldset>
    <p id="description">Небольшой опрос по нашим скалодромным делам</p>
    <img class="horiz-image" src="https://www.shutterstock.com/image-vector/silhouette-rock-climber-climbing-overhang-600nw-2068834883.jpg">

   
    
     <form id="survey-form" method="post" netlify>
        <label for="name" id="name-label" required>Введите ваше имя: <div class="brackets">(ну и может первую букву фамилии, если вы, например, Саша)
          <input name="name" id="name" type="text" placeholder="Ваше имя" required></div></label>
          <br>
        <label for="number" required>Сколько лет вы занимаетесь скалолазанием?<input name="experience" id="number" type="number" min=0 max=50 placeholder="100" required></label>
        <br> 
        <label for="number-week" id="number-label" required>Сколько раз в неделю вы ходите на скалодром?<input name="number-week" id="number-week" type="number" min=0 max=7 placeholder="Я там живу" required></label>
        <br>

        <span class="container" id="which-comfy"><label>
      Какой вид лазания вы предпочитаете?</label></span>
      <span class="container" id="comfy">
        <div  id="right1">
        <div id="bouldering" class="discipline" draggable="true">Боулдеринг</div>
        <div id="lead" class="discipline" draggable="true">Трудность</div>
        <div id="rocks" class="discipline" draggable="true">Скалы</div>
        <div id="speed" class="discipline" draggable="true">Скорость</div>
        </div>
        <div id="left1">
          <div id="discipline1" class="targetD">Обожаю</div>
          <div id="discipline2" class="targetD">Плюс вайб</div>
          <div id="discipline3" class="targetD">Середнячок</div>
          <div id="discipline4" class="targetD">Лучше пойду поболтаю</div>
        </div>
        </span>
<br>


     <!--Comfortable gym-->
     <span class="container" id="which-comfy">
      <p>На какой скалодром вам удобнее добираться?</p>
     </span>
    <span class="container" id="comfy">
      <div  id="right">
      <div id="avenue" class="gym" draggable="true">Авеню</div>
      <div id="vershina" class="gym" draggable="true">Вершина</div>
      <div id="licey" class="gym" draggable="true">Лицей</div>
      <div id="eisa" class="gym" draggable="true">Эйса</div>
      </div>
      
      <div id="left">
        <div id="gym1" class="targetG">Удобнее всего</div>
        <div id="gym2" class="targetG">Не так удобно</div>
        <div id="gym3" class="targetG">Где там уже эта маршрутка?</div>
        <div id="gym4" class="targetG">А может, ну его?</div>
      </div>
    </span>
    

  
  <fieldset class="change-color" id="max-fieldset">
    <label for="div-max-category">
        <p>Какая максимальная категория трассы, которую вы пролезали?</p>
     <div class="change-div" id="div-max-category">
      <b>
      <label id="easy-boulders">
        <label>
          <input class="invisible-button" type="radio" id="5a" name="max-category" value="5a" checked>
            <label for="5a">5a</label>
        </label>
        <label>
            <input class="invisible-button" type="radio" id="5b" name="max-category" value="5b">
            <label for="5b">5b</label>
        </label>
        <label>
          <input class="invisible-button" type="radio" id="5с" name="max-category" value="5с">
            <label for="5с">5с</label>
        </label>
      </label>
      <label id="medium-boulders">
        <label>
          <input class="invisible-button" type="radio" id="6a" name="max-category" value="6a">
            <label for="6a">6a</label>
        </label>
        <label>
          <input class="invisible-button" type="radio" id="6b" name="max-category" value="6b">
            <label for="6b">6b</label>
        </label>
        <label>
          <input class="invisible-button" type="radio" id="6c" name="max-category" value="6c">
            <label for="6c">6c</label>
        </label>
      </label>
      <label id="hard-boulders">
        <label>
          <input class="invisible-button" type="radio" id="7a" name="max-category" value="7a">
            <label for="7a">7a</label>
        </label>
        <label>
          <input class="invisible-button" type="radio" id="7b" name="max-category" value="7b">
            <label for="7b">7b</label>
        </label>
        <label>
          <input class="invisible-button" type="radio" id="7c" name="max-category" value="7c">
            <label for="7c">7c</label>
        </label>
      </label>
      <div id="aditional">
        <label>
          <input class="invisible-button" type="radio" id="nastina-pyaterka" name="max-category-add" value="nastina-pyaterka">
            <label for="nastina-pyaterka">Настина пятёрка&#128546</label>
        </label>
        <label>
          <input class="invisible-button" type="radio" id="eshe-pyaterka" name="max-category-add" value="eshe-pyaterka">
            <label for="eshe-pyaterka">Чья-то ещё пятерка&#9760</label>
        </label>
      </div>
      </b>
      </div>


    </label>
</fieldset>


<fieldset class="change-color" id="usual-fieldset" required>
      <p>Какие категории трасс вы лазаете на обычной тренировке? 
      <!-- id="us5a" - usually 5a"-->
      <div class="usual-div">
  
        <label><input type="checkbox" name="usually" id="us5a" value="us5a">5a</label>
        <label><input type="checkbox" name="usually" id="us5b" value="us5b">5b</label>
        <label><input type="checkbox" name="usually" id="us5c" value="us5с">5c</label>
        <label><input type="checkbox" name="usually" id="us6a" value="us6a">6a</label>
        <label><input type="checkbox" name="usually" id="us6b" value="us6b">6b</label>
        <label><input type="checkbox" name="usually" id="us6c" value="us6c">6c</label>
        <label><input type="checkbox" name="usually" id="us7a" value="us7a">7a</label>
        <label><input type="checkbox" name="usually" id="us7b" value="us7b">7b</label>
        <label><input type="checkbox" name="usually" id="us7c" value="us7c">7c</label>
      </p>
      <label><input type="checkbox" name="usually" id="us-trainer" value="us-trainer">Не знаю, мне тренер придумывает/ребята показывают¯\_(ツ)_/¯</label>
    </div>
</fieldset>

        <label>Какой стиль лазания вам нравится больше?<select required id="dropdown" type="dropdown" name="style"required>
          <option value="static">Статика</option>
          <option value="dynamic">Динамика</option>
          <option value="both-static-and-dynamic">И то, и другое</option>
          </select>
</label>
<fieldset class="change-color" id="skalomag-fieldset">
<label>Если бы вы могли использовать что-то одно, что бы вы выбрали?
<br>
  <label for="skalniki"><input type="radio" id="skalniki"  value="skalniki" name="skalomag" checked required>Скальники</label>
  <label for="magnesium"><input type="radio" id="magnesium"  value="magnesium" name="skalomag" required>Магнезию</label>

</label>
</fieldset>

<label for="why" >Почему вы занимаетесь скалолазанием, что вас в нем привлекает?
 <textarea id="why" name="why" required></textarea>
</label>

<label for="wishes" >Есть ли у вас пожелания/слова благодарности/советы своим собратьям-скалолазам?
  <br>
  <textarea id="wishes" name="wishes" required></textarea>
 </label>
 <br>
 <label>
 И последний, самый сложный вопрос...
 <br>
 Представьте, что вы лазаете с некой девушкой по имени Даша, и продолжите диалог:
 <br>
 Даша (лезет): Настя, какая рука? Левая, правая? 
 <br>
 Настя: Левая! 
 <br>
 Даша (падая): 
 <label for="dasha">
   <input type="text" name="clave1" size="20" required>
  </label>
      <input type="button" class="small-button" value="Проверить" onClick="checkAnswers()">
</label>
      <br>
  <button id="submit" type="submit">Отправить данные научному консилиуму</button>


  <script>
    let gyms = document.getElementsByClassName('gym');
    let right = document.getElementById('right');
    let gym1 = document.getElementById('gym1');
    let gym2 = document.getElementById('gym2');
    let gym3 = document.getElementById('gym3');
    let gym4 = document.getElementById('gym4');

    let disciplines = document.getElementsByClassName('discipline');
    let right1 = document.getElementById('right1');
    let discipline1 = document.getElementById('discipline1'); 
    let discipline2 = document.getElementById('discipline2');
    let discipline3 = document.getElementById('discipline3');
    let discipline4 = document.getElementById('discipline4');

    for (gym of gyms) {
    gym.addEventListener("dragstart", function(e){
        let selected = e.target;
  
        right.addEventListener("dragover", function(e){
            e.preventDefault();
        });
        right.addEventListener("drop", function(e){
            right.appendChild(selected);
            selected = null;
        });
      
        gym1.addEventListener("dragover", function(e){
            e.preventDefault();
        });
        gym1.addEventListener("drop", function(e){
          if (gym1.childElementCount == 0){
            gym1.appendChild(selected);
            selected = null;
          }
        });
    
        gym2.addEventListener("dragover", function(e){
            e.preventDefault();
        });
        gym2.addEventListener("drop", function(e){
          if (gym2.childElementCount == 0){
            gym2.appendChild(selected);
            selected = null;
          }
        });
        gym3.addEventListener("dragover", function(e){
            e.preventDefault();
        });
        gym3.addEventListener("drop", function(e){
          if (gym3.childElementCount == 0){
            gym3.appendChild(selected);
            selected = null;
          }
        });
        gym4.addEventListener("dragover", function(e){
            e.preventDefault();
        });
        gym4.addEventListener("drop", function(e){
          if (gym4.childElementCount == 0){
            gym4.appendChild(selected);
            selected = null;
          }
          });
      });
    }
    

  // touchscreen for gyms
    const targetsG = document.querySelectorAll('.targetG');

    let selected = null;
    var lastMove = null;

    function handleDragStart(e) {
    selected = e.target; // Store the element being dragged
    selected.classList.add('dragging'); // Add a class for visual feedback (optional)
    lastMove = handleDragStart(e);
    // For touch, prevent default behavior (scrolling)
    if (e.type === 'touchstart') {
        e.preventDefault();
    }
    
}

function handleDragOver(e) {
    e.preventDefault(); // Allow dropping
}

function handleDrop(e) {
    e.preventDefault(); // Prevent default drop behavior

    if (selected) {
        this.appendChild(selected); // 'this' refers to the drop target
        selected.classList.remove('dragging'); // Remove dragging class (optional)
        selected = null; // Clear the selected element
    }
}


for (let gym of gyms) {
    // Mouse events
    gym.addEventListener('dragstart', handleDragStart);

    // Touch events
    gym.addEventListener('touchstart', handleDragStart);
    gym.addEventListener('touchmove', function ggg(e) {
        // Prevent scrolling while dragging
        e.preventDefault();
        lastMove = ggg(e);
        if (selected) {
            // Get touch position relative to the document
            const touch = e.touches[0];
            selected.style.position = 'absolute';
            selected.style.left = touch.pageX - selected.offsetWidth / 2 + 'px';
            selected.style.top = touch.pageY - selected.offsetHeight / 2 + 'px';
        }
    });
    gym.addEventListener('touchend', function(e) {
        e.preventDefault();
      
        if (selected!=0) {
            // Find the drop target under the touch point
            const touch = e.changedTouches[0];
            const dropTargetG = document.elementFromPoint(touch.clientX, touch.clientY);
            
                if (dropTargetG === gym1 && gym1.childElementCount === 0) {
              gym1.appendChild(selected);}

              if (dropTargetG === gym2 && gym2.childElementCount === 0) {
              gym2.appendChild(selected);}
              
              if (dropTargetG === gym3 && gym3.childElementCount === 0) {
              gym3.appendChild(selected);}

              if (dropTargetG === gym4 && gym4.childElementCount === 0) {
              gym4.appendChild(selected);}

              if (dropTargetG === right) {
              right.appendChild(selected);}

              else {
              return
              }

              selected.classList.remove('dragging');
            selected = null;
        }}
    );
    gym.setAttribute('draggable', true); // Make sure the element is draggable
}
       // end touchscreen for gyms


       //touchscreen for disciplines

       const targetsD = document.querySelectorAll('.targetD');

for (let discipline of disciplines) {
discipline.addEventListener('touchstart', handleDragStart);
discipline.addEventListener('touchmove', function ggg(e) {
    // Prevent scrolling while dragging
    e.preventDefault();
    lastMove = ggg(e);
    if (selected) {
        // Get touch position relative to the document
        const touch = e.touches[0];
        selected.style.position = 'absolute';
        selected.style.left = touch.pageX - selected.offsetWidth / 2 + 'px';
        selected.style.top = touch.pageY - selected.offsetHeight / 2 + 'px';
    }
});
discipline.addEventListener('touchend', function(e) {
    e.preventDefault();
  
    if (selected!=0) {
        const touch = e.changedTouches[0];
        const dropTargetD = document.elementFromPoint(touch.clientX, touch.clientY);
        
            if (dropTargetD === discipline1 && discipline1.childElementCount == 0) {
              discipline1.appendChild(selected);}

          if (dropTargetD === discipline2 && discipline2.childElementCount == 0) {
            discipline2.appendChild(selected);}
          
          if (dropTargetD === discipline3 && discipline3.childElementCount == 0) {
            discipline3.appendChild(selected);}

          if (dropTargetD === discipline4 && discipline4.childElementCount == 0) {
            discipline4.appendChild(selected);}

            if (dropTargetD === right1) {
              right1.appendChild(selected);}

            else {
              return;
            }
        selected.classList.remove('dragging');
        selected = null;
    }}
);


discipline.setAttribute('draggable', true); 
}

       // end touchscreen for disciplines


      for (discipline of disciplines) {
    discipline.addEventListener("dragstart", function(e){
        let selected = e.target;
  
        right1.addEventListener("dragover", function(e){
            e.preventDefault();
        });
        right1.addEventListener("drop", function(e){
            right1.appendChild(selected);
            selected = null;
        });
      
        discipline1.addEventListener("dragover", function(e){
            e.preventDefault();
        });
        discipline1.addEventListener("drop", function(e){
          if (discipline1.childElementCount == 0){
            discipline1.appendChild(selected);
            selected = null;
           
          }
        });
    
        discipline2.addEventListener("dragover", function(e){
            e.preventDefault();
        });
        discipline2.addEventListener("drop", function(e){
          if (discipline2.childElementCount == 0){
          discipline2.appendChild(selected);
            selected = null;
          }
        });
        discipline3.addEventListener("dragover", function(e){
            e.preventDefault();
        });
        discipline3.addEventListener("drop", function(e){
          if (discipline3.childElementCount == 0){
          discipline3.appendChild(selected);
            selected = null;
          }
        });
        discipline4.addEventListener("dragover", function(e){
            e.preventDefault();
        });
        discipline4.addEventListener("drop", function(e){
          if (discipline4.childElementCount == 0){
          discipline4.appendChild(selected);
            selected = null;
          }
          });
        });  
      }



//Dasha

let failedAttempts = 3;

function checkAnswers(){
   Student_answer = document.querySelector('[name="clave1"]').value
   Correct_answer = "никакая"
   Correct_answer1 = "никакая!"
   Correct_answer2 = "Никакая"
   Correct_answer3 = "Никакая!"
   Correct_answer4 = "НИКАКАЯ"
   Correct_answer5 = "НИКАКАЯ!"

   if (Student_answer.length === 0 || Correct_answer.length === 0) {
       alert("Молчание не является ответом...");
       return false;
   }

   if (failedAttempts <= 0){
        alert("И правильный ответ, конечно: никакая, никакая!, Никакая, Никакая!, НИКАКАЯ, НИКАКАЯ!\nА ведь правильных ответов было так много...")}

   if (Student_answer != Correct_answer && Student_answer != Correct_answer1 && Student_answer != Correct_answer2 && Student_answer != Correct_answer3 && Student_answer != Correct_answer4 && Student_answer != Correct_answer5)
      
     {  
      alert("Не знаете вы Дашу...\nОзарение снизойдет на вас через "+(failedAttempts)+" ...");
      failedAttempts--;
      return false;
    }

   if (Student_answer === Correct_answer) {
       alert("Именно так! Похоже, вы часто ходите на скалодром!");
  }
      
   if (Student_answer === Correct_answer1) {
       alert("Именно так! Похоже, вы часто ходите на скалодром!");
   }
       if (Student_answer === Correct_answer2) {
       alert("Именно так! Похоже, вы часто ходите на скалодром!");
       }
       if (Student_answer === Correct_answer3) {
       alert("Именно так! Похоже, вы часто ходите на скалодром!");
       }
       if (Student_answer === Correct_answer4) {
       alert("Именно так! Похоже, вы часто ходите на скалодром!");
       }
       if (Student_answer === Correct_answer5) {
       alert("Именно так! Похоже, вы часто ходите на скалодром!");
       }
       if (Student_answer === Correct_answer6) {
       alert("Именно так! Похоже, вы часто ходите на скалодром!");
       }

    }
</script>
</form>
    </body>
